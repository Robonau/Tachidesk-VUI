import { b as boot, P as Plugin } from "./index.75e4774b.js";
let base = Plugin.getItem("baseUrl");
function authOptions(options = void 0) {
  const update = { ...options };
  const auth = Plugin.getItem("auth");
  if (auth != null) {
    update.headers = {
      ...update.headers,
      Authorization: `Basic ${btoa(auth.username + ":" + auth.password)}`
    };
  }
  return update;
}
function resetBase() {
  base = Plugin.getItem("baseUrl");
}
function fetcher(url, options = void 0) {
  const tmp = base + url;
  return fetch(tmp, authOptions(options));
}
async function fetchJSON(url, options = void 0) {
  const tmp = await fetcher(url, options);
  return tmp.json();
}
var fetcher$1 = boot(({ app }) => {
  app.config.globalProperties["$fetch"] = fetcher;
  app.config.globalProperties["$fetchJSON"] = fetchJSON;
  app.provide("fetch", fetcher);
  app.provide("fetchJSON", fetchJSON);
});
export { authOptions, fetcher$1 as default, fetchJSON, fetcher, resetBase };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmV0Y2hlci5kMDI2ZjQ2OC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2Jvb3QvZmV0Y2hlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChDKSBDb250cmlidXRvcnMgdG8gdGhlIFN1d2F5b21pIHByb2plY3RcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4gKi9cbmltcG9ydCB7IGJvb3QgfSBmcm9tICdxdWFzYXIvd3JhcHBlcnMnO1xuaW1wb3J0IHsgTG9jYWxTdG9yYWdlIH0gZnJvbSAncXVhc2FyJztcbmxldCBiYXNlID0gTG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jhc2VVcmwnKSBhcyBzdHJpbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhdXRoT3B0aW9ucyhvcHRpb25zOiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCB1cGRhdGUgPSB7IC4uLm9wdGlvbnMgfTtcbiAgY29uc3QgYXV0aCA9IDx7IHVzZXJuYW1lOiBzdHJpbmc7IHBhc3N3b3JkOiBzdHJpbmcgfSB8IG51bGw+KFxuICAgIExvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoJylcbiAgKTtcbiAgaWYgKGF1dGggIT0gbnVsbCkge1xuICAgIHVwZGF0ZS5oZWFkZXJzID0ge1xuICAgICAgLi4udXBkYXRlLmhlYWRlcnMsXG4gICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtidG9hKGF1dGgudXNlcm5hbWUgKyAnOicgKyBhdXRoLnBhc3N3b3JkKX1gXG4gICAgfTtcbiAgfVxuICByZXR1cm4gdXBkYXRlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRCYXNlKCkge1xuICBiYXNlID0gTG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jhc2VVcmwnKSBhcyBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaGVyKFxuICB1cmw6IFJlcXVlc3RJbmZvIHwgVVJMLFxuICBvcHRpb25zOiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuKSB7XG4gIGNvbnN0IHRtcCA9IGJhc2UgKyB1cmw7XG4gIHJldHVybiBmZXRjaCh0bXAsIGF1dGhPcHRpb25zKG9wdGlvbnMpKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoSlNPTihcbiAgdXJsOiBSZXF1ZXN0SW5mbyB8IFVSTCxcbiAgb3B0aW9uczogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbikge1xuICBjb25zdCB0bXAgPSBhd2FpdCBmZXRjaGVyKHVybCwgb3B0aW9ucyk7XG4gIHJldHVybiB0bXAuanNvbigpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBib290KCh7IGFwcCB9KSA9PiB7XG4gIC8vIGZvciBPcHRpb25zIEFQSVxuICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXNbJyRmZXRjaCddID0gZmV0Y2hlcjtcbiAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzWyckZmV0Y2hKU09OJ10gPSBmZXRjaEpTT047XG5cbiAgLy8gZm9yIENvbXBvc2l0aW9uIEFQSVxuICBhcHAucHJvdmlkZSgnZmV0Y2gnLCBmZXRjaGVyKTtcbiAgYXBwLnByb3ZpZGUoJ2ZldGNoSlNPTicsIGZldGNoSlNPTik7XG59KTtcblxuZGVjbGFyZSBtb2R1bGUgJ0B2dWUvcnVudGltZS1jb3JlJyB7XG4gIGludGVyZmFjZSBDb21wb25lbnRDdXN0b21Qcm9wZXJ0aWVzIHtcbiAgICAkZmV0Y2g6IHR5cGVvZiBmZXRjaGVyO1xuICAgICRmZXRjaEpTT046IHR5cGVvZiBmZXRjaEpTT047XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJMb2NhbFN0b3JhZ2UiXSwibWFwcGluZ3MiOiI7QUFRQSxJQUFJLE9BQU9BLE9BQWEsUUFBUSxTQUFTO0FBRXpCLFNBQUEsWUFBWSxVQUFtQyxRQUFXO0FBQ2xFLFFBQUEsU0FBUyxFQUFFLEdBQUc7QUFDZCxRQUFBLE9BQ0pBLE9BQWEsUUFBUSxNQUFNO0FBRTdCLE1BQUksUUFBUSxNQUFNO0FBQ2hCLFdBQU8sVUFBVTtBQUFBLE1BQ2YsR0FBRyxPQUFPO0FBQUEsTUFDVixlQUFlLFNBQVMsS0FBSyxLQUFLLFdBQVcsTUFBTSxLQUFLLFFBQVE7QUFBQSxJQUFBO0FBQUEsRUFFcEU7QUFDTyxTQUFBO0FBQ1Q7QUFFTyxTQUFTLFlBQVk7QUFDbkIsU0FBQUEsT0FBYSxRQUFRLFNBQVM7QUFDdkM7QUFFZ0IsU0FBQSxRQUNkLEtBQ0EsVUFBbUMsUUFDbkM7QUFDQSxRQUFNLE1BQU0sT0FBTztBQUNuQixTQUFPLE1BQU0sS0FBSyxZQUFZLE9BQU8sQ0FBQztBQUN4QztBQUVzQixlQUFBLFVBQ3BCLEtBQ0EsVUFBbUMsUUFDbkM7QUFDQSxRQUFNLE1BQU0sTUFBTSxRQUFRLEtBQUssT0FBTztBQUN0QyxTQUFPLElBQUk7QUFDYjtBQUVBLElBQUEsWUFBZSxLQUFLLENBQUMsRUFBRSxVQUFVO0FBRTNCLE1BQUEsT0FBTyxpQkFBaUIsWUFBWTtBQUNwQyxNQUFBLE9BQU8saUJBQWlCLGdCQUFnQjtBQUd4QyxNQUFBLFFBQVEsU0FBUyxPQUFPO0FBQ3hCLE1BQUEsUUFBUSxhQUFhLFNBQVM7QUFDcEMsQ0FBQzs7In0=
