import{Q as re}from"./QIcon.ac005315.js";import{Q as D,a as K}from"./QItemLabel.f084a15e.js";import{Q as Y}from"./QItem.624de6a8.js";import{Q as Se}from"./QToggle.6707944d.js";import{Q as ce}from"./QCardSection.42fc0f1a.js";import{Q as ye}from"./QInput.a9b5ac3c.js";import{u as ba,a as ga,c as ka}from"./use-form.d75ed6a7.js";import{T as ha}from"./TouchPan.e5cef90e.js";import{a as He,u as Ye}from"./use-dark.1516cb7d.js";import{b as de,h as Ee}from"./format.2a3572e1.js";import{r as k,c as n,o as Ge,Y as Sa,ap as ya,aq as Fe,h as f,g as pe,w as Je,N as Te,R as Ze,a0 as Ca,E as _a,ar as qa,ah as wa,as as Fa,at as $a,_ as Ma,f as za,j as G,k as J,m as c,n as r,q as j,D as L,t as je,v as $e}from"./index.b35b6c87.js";import{e as Ra,c as Ae,u as Ba,b as xa,j as Ua,Q as Oe}from"./QSpinner.cedf2831.js";import{b as Va,Q as X}from"./QBtn.c248b476.js";import{Q as Ce}from"./QCardActions.ed0a9806.js";import{Q as _e}from"./QCard.70ae0f07.js";import{Q as qe}from"./QDialog.476c5919.js";import{Q as We}from"./QSeparator.8126d6b7.js";import{Q as La}from"./QSelect.1bc758f5.js";import{Q as Ta}from"./QExpansionItem.e73e9fb1.js";import{Q as Aa}from"./QList.53b7cd17.js";import{R as Z}from"./Ripple.5f8954d8.js";import{C as se}from"./ClosePopup.57ec600b.js";import{u as Pa}from"./use-quasar.9a62b4af.js";import{resetBase as Ia}from"./fetcher.f8235356.js";import"./use-checkbox.679430af.js";import"./option-sizes.72a65bda.js";import"./use-key-composition.a9714931.js";import"./uid.42677368.js";import"./focus-manager.32f8d49a.js";import"./selection.01e1b310.js";import"./use-timeout.4812ac2b.js";import"./scroll.fbb25234.js";import"./dom.4a68f118.js";import"./use-transition.6c02567b.js";import"./QMenu.62948ea2.js";import"./position-engine.0d3d3347.js";import"./use-virtual-scroll.ef29f78d.js";import"./rtl.b51694b1.js";const Ke="q-slider__marker-labels",Na=e=>({value:e}),Qa=({marker:e})=>f("div",{key:e.value,style:e.style,class:e.classes},e.label),ea=[34,37,40,33,39,38],Da={...Ye,...ba,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ea=["pan","update:modelValue","change"];function ja({updateValue:e,updatePosition:t,getDragging:o,formAttrs:m}){const{props:a,emit:q,slots:u,proxy:{$q:_}}=pe(),T=He(a,_),U=ga(m),z=k(!1),A=k(!1),w=k(!1),s=k(!1),v=n(()=>a.vertical===!0?"--v":"--h"),M=n(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),B=n(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(_.lang.rtl===!0)),b=n(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),d=n(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),h=n(()=>a.disable!==!0&&a.readonly!==!0&&b.value<d.value),V=n(()=>(String(a.step).trim().split(".")[1]||"").length),I=n(()=>a.step===0?1:a.step),p=n(()=>h.value===!0?a.tabindex||0:-1),x=n(()=>a.max-a.min),E=n(()=>d.value-b.value),S=n(()=>W(b.value)),F=n(()=>W(d.value)),O=n(()=>a.vertical===!0?B.value===!0?"bottom":"top":B.value===!0?"right":"left"),y=n(()=>a.vertical===!0?"height":"width"),ee=n(()=>a.vertical===!0?"width":"height"),ae=n(()=>a.vertical===!0?"vertical":"horizontal"),oe=n(()=>{const l={role:"slider","aria-valuemin":b.value,"aria-valuemax":d.value,"aria-orientation":ae.value,"data-step":a.step};return a.disable===!0?l["aria-disabled"]="true":a.readonly===!0&&(l["aria-readonly"]="true"),l}),H=n(()=>`q-slider q-slider${v.value} q-slider--${z.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(h.value===!0?" q-slider--editable":""))+(w.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(T.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+v.value:""));function ne(l){const g="q-slider__"+l;return`${g} ${g}${v.value} ${g}${v.value}${M.value}`}function me(l){const g="q-slider__"+l;return`${g} ${g}${v.value}`}const be=n(()=>{const l=a.selectionColor||a.color;return"q-slider__selection absolute"+(l!==void 0?` text-${l}`:"")}),ge=n(()=>me("markers")+" absolute overflow-hidden"),ke=n(()=>me("track-container")),Me=n(()=>ne("pin")),ie=n(()=>ne("label")),he=n(()=>ne("text-container")),ze=n(()=>ne("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),Re=n(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),te=n(()=>{const l={[ee.value]:a.trackSize};return a.trackImg!==void 0&&(l.backgroundImage=`url(${a.trackImg}) !important`),l}),i=n(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),C=n(()=>{const l={[O.value]:`${100*S.value}%`,[y.value]:`${100*(F.value-S.value)}%`};return a.innerTrackImg!==void 0&&(l.backgroundImage=`url(${a.innerTrackImg}) !important`),l});function P(l){const{min:g,max:$,step:R}=a;let Q=g+l*($-g);if(R>0){const ue=(Q-g)%R;Q+=(Math.abs(ue)>=R/2?(ue<0?-1:1)*R:0)-ue}return V.value>0&&(Q=parseFloat(Q.toFixed(V.value))),de(Q,b.value,d.value)}function W(l){return x.value===0?0:(l-a.min)/x.value}function N(l,g){const $=Sa(l),R=a.vertical===!0?de(($.top-g.top)/g.height,0,1):de(($.left-g.left)/g.width,0,1);return de(B.value===!0?1-R:R,S.value,F.value)}const fe=n(()=>ya(a.markers)===!0?a.markers:I.value),Pe=n(()=>{const l=[],g=fe.value,$=a.max;let R=a.min;do l.push(R),R+=g;while(R<$);return l.push($),l}),Ie=n(()=>{const l=` ${Ke}${v.value}-`;return Ke+`${l}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${l}${B.value===!0?"rtl":"ltr"}`}),Be=n(()=>a.markerLabels===!1?null:oa(a.markerLabels).map((l,g)=>({index:g,value:l.value,label:l.label||l.value,classes:Ie.value+(l.classes!==void 0?" "+l.classes:""),style:{...Qe(l.value),...l.style||{}}}))),Ne=n(()=>({markerList:Be.value,markerMap:na.value,classes:Ie.value,getStyle:Qe})),ra=n(()=>{if(E.value!==0){const l=100*fe.value/E.value;return{...C.value,backgroundSize:a.vertical===!0?`2px ${l}%`:`${l}% 2px`}}return null});function oa(l){if(l===!1)return null;if(l===!0)return Pe.value.map(Na);if(typeof l=="function")return Pe.value.map($=>{const R=l($);return Fe(R)===!0?{...R,value:$}:{value:$,label:R}});const g=({value:$})=>$>=a.min&&$<=a.max;return Array.isArray(l)===!0?l.map($=>Fe($)===!0?$:{value:$}).filter(g):Object.keys(l).map($=>{const R=l[$],Q=Number($);return Fe(R)===!0?{...R,value:Q}:{value:Q,label:R}}).filter(g)}function Qe(l){return{[O.value]:`${100*(l-a.min)/x.value}%`}}const na=n(()=>{if(a.markerLabels===!1)return null;const l={};return Be.value.forEach(g=>{l[g.value]=g}),l});function ua(){if(u["marker-label-group"]!==void 0)return u["marker-label-group"](Ne.value);const l=u["marker-label"]||Qa;return Be.value.map(g=>l({marker:g,...Ne.value}))}const sa=n(()=>[[ha,ia,void 0,{[ae.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ia(l){l.isFinal===!0?(s.value!==void 0&&(t(l.evt),l.touch===!0&&e(!0),s.value=void 0,q("pan","end")),z.value=!1,w.value=!1):l.isFirst===!0?(s.value=o(l.evt),t(l.evt),e(),z.value=!0,q("pan","start")):(t(l.evt),e())}function De(){w.value=!1}function da(l){t(l,o(l)),e(),A.value=!0,z.value=!0,document.addEventListener("mouseup",xe,!0)}function xe(){A.value=!1,z.value=!1,e(!0),De(),document.removeEventListener("mouseup",xe,!0)}function ca(l){t(l,o(l)),e(!0)}function va(l){ea.includes(l.keyCode)&&e(!0)}function ma(l){if(a.vertical===!0)return null;const g=_.lang.rtl!==a.reverse?1-l:l;return{transform:`translateX(calc(${2*g-1} * ${a.thumbSize} / 2 + ${50-100*g}%))`}}function fa(l){const g=n(()=>A.value===!1&&(w.value===l.focusValue||w.value==="both")?" q-slider--focus":""),$=n(()=>`q-slider__thumb q-slider__thumb${v.value} q-slider__thumb${v.value}-${B.value===!0?"rtl":"ltr"} absolute non-selectable`+g.value+(l.thumbColor.value!==void 0?` text-${l.thumbColor.value}`:"")),R=n(()=>({width:a.thumbSize,height:a.thumbSize,[O.value]:`${100*l.ratio.value}%`,zIndex:w.value===l.focusValue?2:void 0})),Q=n(()=>l.labelColor.value!==void 0?` text-${l.labelColor.value}`:""),ue=n(()=>ma(l.ratio.value)),Ue=n(()=>"q-slider__text"+(l.labelTextColor.value!==void 0?` text-${l.labelTextColor.value}`:""));return()=>{const Ve=[f("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[f("path",{d:a.thumbPath})]),f("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(Ve.push(f("div",{class:Me.value+" absolute fit no-pointer-events"+Q.value},[f("div",{class:ie.value,style:{minWidth:a.thumbSize}},[f("div",{class:he.value,style:ue.value},[f("span",{class:Ue.value},l.label.value)])])])),a.name!==void 0&&a.disable!==!0&&U(Ve,"push")),f("div",{class:$.value,style:R.value,...l.getNodeData()},Ve)}}function pa(l,g,$,R){const Q=[];a.innerTrackColor!=="transparent"&&Q.push(f("div",{key:"inner",class:i.value,style:C.value})),a.selectionColor!=="transparent"&&Q.push(f("div",{key:"selection",class:be.value,style:l.value})),a.markers!==!1&&Q.push(f("div",{key:"marker",class:ge.value,style:ra.value})),R(Q);const ue=[Ra("div",{key:"trackC",class:ke.value,tabindex:g.value,...$.value},[f("div",{class:Re.value,style:te.value},Q)],"slide",h.value,()=>sa.value)];if(a.markerLabels!==!1){const Ue=a.switchMarkerLabelsSide===!0?"unshift":"push";ue[Ue](f("div",{key:"markerL",class:ze.value},ua()))}return ue}return Ge(()=>{document.removeEventListener("mouseup",xe,!0)}),{state:{active:z,focus:w,preventFocus:A,dragging:s,editable:h,classes:H,tabindex:p,attributes:oe,step:I,decimals:V,trackLen:x,innerMin:b,innerMinRatio:S,innerMax:d,innerMaxRatio:F,positionProp:O,sizeProp:y,isReversed:B},methods:{onActivate:da,onMobileClick:ca,onBlur:De,onKeyup:va,getContent:pa,getThumbRenderFn:fa,convertRatioToModel:P,convertModelToRatio:W,getDraggingRatio:N}}}const Oa=()=>({});var Wa=Ae({name:"QSlider",props:{...Da,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Ea,setup(e,{emit:t}){const{proxy:{$q:o}}=pe(),{state:m,methods:a}=ja({updateValue:v,updatePosition:B,getDragging:M,formAttrs:ka(e)}),q=k(null),u=k(0),_=k(0);function T(){_.value=e.modelValue===null?m.innerMin.value:de(e.modelValue,m.innerMin.value,m.innerMax.value)}Je(()=>`${e.modelValue}|${m.innerMin.value}|${m.innerMax.value}`,T),T();const U=n(()=>a.convertModelToRatio(_.value)),z=n(()=>m.active.value===!0?u.value:U.value),A=n(()=>{const h={[m.positionProp.value]:`${100*m.innerMinRatio.value}%`,[m.sizeProp.value]:`${100*(z.value-m.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(h.backgroundImage=`url(${e.selectionImg}) !important`),h}),w=a.getThumbRenderFn({focusValue:!0,getNodeData:Oa,ratio:z,label:n(()=>e.labelValue!==void 0?e.labelValue:_.value),thumbColor:n(()=>e.thumbColor||e.color),labelColor:n(()=>e.labelColor),labelTextColor:n(()=>e.labelTextColor)}),s=n(()=>m.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:a.onMobileClick}:{onMousedown:a.onActivate,onFocus:b,onBlur:a.onBlur,onKeydown:d,onKeyup:a.onKeyup});function v(h){_.value!==e.modelValue&&t("update:modelValue",_.value),h===!0&&t("change",_.value)}function M(){return q.value.getBoundingClientRect()}function B(h,V=m.dragging.value){const I=a.getDraggingRatio(h,V);_.value=a.convertRatioToModel(I),u.value=e.snap!==!0||e.step===0?I:a.convertModelToRatio(_.value)}function b(){m.focus.value=!0}function d(h){if(!ea.includes(h.keyCode))return;Te(h);const V=([34,33].includes(h.keyCode)?10:1)*m.step.value,I=([34,37,40].includes(h.keyCode)?-1:1)*(m.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*V;_.value=de(parseFloat((_.value+I).toFixed(m.decimals.value)),m.innerMin.value,m.innerMax.value),v()}return()=>{const h=a.getContent(A,m.tabindex,s,V=>{V.push(w())});return f("div",{ref:q,class:m.classes.value+(e.modelValue===null?" q-slider--no-value":""),...m.attributes.value,"aria-valuenow":e.modelValue},h)}}});const Ka={...Ba,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Le=50,aa=2*Le,ta=aa*Math.PI,Xa=Math.round(ta*1e3)/1e3;var Ha=Ae({name:"QCircularProgress",props:{...Ka,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=pe(),m=xa(e),a=n(()=>{const w=(o.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(o.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-w}deg)`:`rotate3d(0, 0, 1, ${w-90}deg)`}}),q=n(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),u=n(()=>aa/(1-e.thickness/2)),_=n(()=>`${u.value/2} ${u.value/2} ${u.value} ${u.value}`),T=n(()=>de(e.value,e.min,e.max)),U=n(()=>ta*(1-(T.value-e.min)/(e.max-e.min))),z=n(()=>e.thickness/2*u.value);function A({thickness:w,offset:s,color:v,cls:M,rounded:B}){return f("circle",{class:"q-circular-progress__"+M+(v!==void 0?` text-${v}`:""),style:q.value,fill:"transparent",stroke:"currentColor","stroke-width":w,"stroke-dasharray":Xa,"stroke-dashoffset":s,"stroke-linecap":B,cx:u.value,cy:u.value,r:Le})}return()=>{const w=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&w.push(f("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Le-z.value/2,cx:u.value,cy:u.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&w.push(A({cls:"track",thickness:z.value,offset:0,color:e.trackColor})),w.push(A({cls:"circle",thickness:z.value,offset:U.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const s=[f("svg",{class:"q-circular-progress__svg",style:a.value,viewBox:_.value,"aria-hidden":"true"},w)];return e.showValue===!0&&s.push(f("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[f("div",T.value)])),f("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:m.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:T.value},Ua(t.internal,s))}}});function ve(e,t,o,m){const a=[];return e.forEach(q=>{m(q)===!0?a.push(q):t.push({failedPropValidation:o,file:q})}),a}function we(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Te(e)}const Ya={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ga=["rejected"];function Ja({editable:e,dnd:t,getFileInput:o,addFilesToQueue:m}){const{props:a,emit:q,proxy:u}=pe(),_=k(null),T=n(()=>a.accept!==void 0?a.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),U=n(()=>parseInt(a.maxFiles,10)),z=n(()=>parseInt(a.maxTotalSize,10));function A(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&Ze(d);else{const h=o();h&&h!==d.target&&h.click(d)}}function w(d){e.value&&d&&m(null,d)}function s(d,h,V,I){let p=Array.from(h||d.target.files);const x=[],E=()=>{x.length>0&&q("rejected",x)};if(a.accept!==void 0&&T.value.indexOf("*/")===-1&&(p=ve(p,x,"accept",S=>T.value.some(F=>S.type.toUpperCase().startsWith(F)||S.name.toUpperCase().endsWith(F))),p.length===0))return E();if(a.maxFileSize!==void 0){const S=parseInt(a.maxFileSize,10);if(p=ve(p,x,"max-file-size",F=>F.size<=S),p.length===0)return E()}if(a.multiple!==!0&&p.length>0&&(p=[p[0]]),p.forEach(S=>{S.__key=S.webkitRelativePath+S.lastModified+S.name+S.size}),I===!0){const S=V.map(F=>F.__key);p=ve(p,x,"duplicate",F=>S.includes(F.__key)===!1)}if(p.length===0)return E();if(a.maxTotalSize!==void 0){let S=I===!0?V.reduce((F,O)=>F+O.size,0):0;if(p=ve(p,x,"max-total-size",F=>(S+=F.size,S<=z.value)),p.length===0)return E()}if(typeof a.filter=="function"){const S=a.filter(p);p=ve(p,x,"filter",F=>S.includes(F))}if(a.maxFiles!==void 0){let S=I===!0?V.length:0;if(p=ve(p,x,"max-files",()=>(S++,S<=U.value)),p.length===0)return E()}if(E(),p.length>0)return p}function v(d){we(d),t.value!==!0&&(t.value=!0)}function M(d){Te(d),(d.relatedTarget!==null||Ca.is.safari!==!0?d.relatedTarget!==_.value:document.elementsFromPoint(d.clientX,d.clientY).includes(_.value)===!1)===!0&&(t.value=!1)}function B(d){we(d);const h=d.dataTransfer.files;h.length>0&&m(null,h),t.value=!1}function b(d){if(t.value===!0)return f("div",{ref:_,class:`q-${d}__dnd absolute-full`,onDragenter:we,onDragover:we,onDragleave:M,onDrop:B})}return Object.assign(u,{pickFiles:A,addFiles:w}),{pickFiles:A,addFiles:w,onDragover:v,onDragleave:M,processFiles:s,getDndNode:b,maxFilesNumber:U,maxTotalSizeNumber:z}}function Xe(e){return(e*100).toFixed(2)+"%"}const Za={...Ye,...Ya,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},la=[...Ga,"start","finish","added","removed"];function et(e){const t=pe(),{props:o,slots:m,emit:a,proxy:q}=t,{$q:u}=q,_=He(o,u);function T(i,C,P){if(i.__status=C,C==="idle"){i.__uploaded=0,i.__progress=0,i.__sizeLabel=Ee(i.size),i.__progressLabel="0.00%";return}if(C==="failed"){q.$forceUpdate();return}i.__uploaded=C==="uploaded"?i.size:P,i.__progress=C==="uploaded"?1:Math.min(.9999,i.__uploaded/i.size),i.__progressLabel=Xe(i.__progress),q.$forceUpdate()}const U=n(()=>o.disable!==!0&&o.readonly!==!0),z=k(!1),A=k(null),w=k(null),s={files:k([]),queuedFiles:k([]),uploadedFiles:k([]),uploadedSize:k(0),updateFileStatus:T,isAlive:()=>Va(t)===!1},{pickFiles:v,addFiles:M,onDragover:B,onDragleave:b,processFiles:d,getDndNode:h,maxFilesNumber:V,maxTotalSizeNumber:I}=Ja({editable:U,dnd:z,getFileInput:ge,addFilesToQueue:ke});Object.assign(s,e({props:o,slots:m,emit:a,helpers:s})),s.isBusy===void 0&&(s.isBusy=k(!1));const p=k(0),x=n(()=>p.value===0?0:s.uploadedSize.value/p.value),E=n(()=>Xe(x.value)),S=n(()=>Ee(p.value)),F=n(()=>U.value===!0&&s.isUploading.value!==!0&&(o.multiple===!0||s.queuedFiles.value.length===0)&&(o.maxFiles===void 0||s.files.value.length<V.value)&&(o.maxTotalSize===void 0||p.value<I.value)),O=n(()=>U.value===!0&&s.isBusy.value!==!0&&s.isUploading.value!==!0&&s.queuedFiles.value.length>0);_a($a,he);const y=n(()=>"q-uploader column no-wrap"+(_.value===!0?" q-uploader--dark q-dark":"")+(o.bordered===!0?" q-uploader--bordered":"")+(o.square===!0?" q-uploader--square no-border-radius":"")+(o.flat===!0?" q-uploader--flat no-shadow":"")+(o.disable===!0?" disabled q-uploader--disable":"")+(z.value===!0?" q-uploader--dnd":"")),ee=n(()=>"q-uploader__header"+(o.color!==void 0?` bg-${o.color}`:"")+(o.textColor!==void 0?` text-${o.textColor}`:""));Je(s.isUploading,(i,C)=>{C===!1&&i===!0?a("start"):C===!0&&i===!1&&a("finish")});function ae(){o.disable===!1&&(s.abort(),s.uploadedSize.value=0,p.value=0,be(),s.files.value=[],s.queuedFiles.value=[],s.uploadedFiles.value=[])}function oe(){o.disable===!1&&ne(["uploaded"],()=>{s.uploadedFiles.value=[]})}function H(){ne(["idle","failed"],({size:i})=>{p.value-=i,s.queuedFiles.value=[]})}function ne(i,C){if(o.disable===!0)return;const P={files:[],size:0},W=s.files.value.filter(N=>i.indexOf(N.__status)===-1?!0:(P.size+=N.size,P.files.push(N),N.__img!==void 0&&window.URL.revokeObjectURL(N.__img.src),!1));P.files.length>0&&(s.files.value=W,C(P),a("removed",P.files))}function me(i){o.disable||(i.__status==="uploaded"?s.uploadedFiles.value=s.uploadedFiles.value.filter(C=>C.__key!==i.__key):i.__status==="uploading"?i.__abort():p.value-=i.size,s.files.value=s.files.value.filter(C=>C.__key!==i.__key?!0:(C.__img!==void 0&&window.URL.revokeObjectURL(C.__img.src),!1)),s.queuedFiles.value=s.queuedFiles.value.filter(C=>C.__key!==i.__key),a("removed",[i]))}function be(){s.files.value.forEach(i=>{i.__img!==void 0&&window.URL.revokeObjectURL(i.__img.src)})}function ge(){return w.value||A.value.getElementsByClassName("q-uploader__input")[0]}function ke(i,C){const P=d(i,C,s.files.value,!0),W=ge();W!=null&&(W.value=""),P!==void 0&&(P.forEach(N=>{if(s.updateFileStatus(N,"idle"),p.value+=N.size,o.noThumbnails!==!0&&N.type.toUpperCase().startsWith("IMAGE")){const fe=new Image;fe.src=window.URL.createObjectURL(N),N.__img=fe}}),s.files.value=s.files.value.concat(P),s.queuedFiles.value=s.queuedFiles.value.concat(P),a("added",P),o.autoUpload===!0&&s.upload())}function Me(){O.value===!0&&s.upload()}function ie(i,C,P){if(i===!0){const W={type:"a",key:C,icon:u.iconSet.uploader[C],flat:!0,dense:!0};let N;return C==="add"?(W.onClick=v,N=he):W.onClick=P,f(X,W,N)}}function he(){return f("input",{ref:w,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:o.accept,multiple:o.multiple===!0?"multiple":void 0,capture:o.capture,onMousedown:Ze,onClick:v,onChange:ke})}function ze(){return m.header!==void 0?m.header(te):[f("div",{class:"q-uploader__header-content column"},[f("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(s.queuedFiles.value.length>0,"removeQueue",H),ie(s.uploadedFiles.value.length>0,"removeUploaded",oe),s.isUploading.value===!0?f(Oe,{class:"q-uploader__spinner"}):null,f("div",{class:"col column justify-center"},[o.label!==void 0?f("div",{class:"q-uploader__title"},[o.label]):null,f("div",{class:"q-uploader__subtitle"},[S.value+" / "+E.value])]),ie(F.value,"add"),ie(o.hideUploadBtn===!1&&O.value===!0,"upload",s.upload),ie(s.isUploading.value,"clear",s.abort)])])]}function Re(){return m.list!==void 0?m.list(te):s.files.value.map(i=>f("div",{key:i.__key,class:"q-uploader__file relative-position"+(o.noThumbnails!==!0&&i.__img!==void 0?" q-uploader__file--img":"")+(i.__status==="failed"?" q-uploader__file--failed":i.__status==="uploaded"?" q-uploader__file--uploaded":""),style:o.noThumbnails!==!0&&i.__img!==void 0?{backgroundImage:'url("'+i.__img.src+'")'}:null},[f("div",{class:"q-uploader__file-header row flex-center no-wrap"},[i.__status==="failed"?f(re,{class:"q-uploader__file-status",name:u.iconSet.type.negative,color:"negative"}):null,f("div",{class:"q-uploader__file-header-content col"},[f("div",{class:"q-uploader__title"},[i.name]),f("div",{class:"q-uploader__subtitle row items-center no-wrap"},[i.__sizeLabel+" / "+i.__progressLabel])]),i.__status==="uploading"?f(Ha,{value:i.__progress,min:0,max:1,indeterminate:i.__progress===0}):f(X,{round:!0,dense:!0,flat:!0,icon:u.iconSet.uploader[i.__status==="uploaded"?"done":"clear"],onClick:()=>{me(i)}})])]))}Ge(()=>{s.isUploading.value===!0&&s.abort(),s.files.value.length>0&&be()});const te={};for(const i in s)qa(s[i])===!0?wa(te,i,()=>s[i].value):te[i]=s[i];return Object.assign(te,{upload:Me,reset:ae,removeUploadedFiles:oe,removeQueuedFiles:H,removeFile:me,pickFiles:v,addFiles:M}),Fa(te,{canAddFiles:()=>F.value,canUpload:()=>O.value,uploadSizeLabel:()=>S.value,uploadProgressLabel:()=>E.value}),Object.assign(q,te),()=>{const i=[f("div",{class:ee.value},ze()),f("div",{class:"q-uploader__list scroll"},Re()),h("uploader")];s.isBusy.value===!0&&i.push(f("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[f(Oe)]));const C={ref:A,class:y.value};return F.value===!0&&Object.assign(C,{onDragover:B,onDragleave:b}),f("div",C,i)}}const at=()=>!0;function tt(e){const t={};return e.forEach(o=>{t[o]=at}),t}const lt=tt(la);var rt=({name:e,props:t,emits:o,injectPlugin:m})=>Ae({name:e,props:{...Za,...t},emits:Fe(o)===!0?{...lt,...o}:[...la,...o],setup(){return et(m)}});function le(e){return typeof e=="function"?e:()=>e}const ot={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},nt=["factory-failed","uploaded","failed","uploading"];function ut({props:e,emit:t,helpers:o}){const m=k([]),a=k([]),q=k(0),u=n(()=>({url:le(e.url),method:le(e.method),headers:le(e.headers),formFields:le(e.formFields),fieldName:le(e.fieldName),withCredentials:le(e.withCredentials),sendRaw:le(e.sendRaw),batch:le(e.batch)})),_=n(()=>q.value>0),T=n(()=>a.value.length>0);let U;function z(){m.value.forEach(v=>{v.abort()}),a.value.length>0&&(U=!0)}function A(){const v=o.queuedFiles.value.slice(0);o.queuedFiles.value=[],u.value.batch(v)?w(v):v.forEach(M=>{w([M])})}function w(v){if(q.value++,typeof e.factory!="function"){s(v,{});return}const M=e.factory(v);if(!M)t("factory-failed",new Error("QUploader: factory() does not return properly"),v),q.value--;else if(typeof M.catch=="function"&&typeof M.then=="function"){a.value.push(M);const B=b=>{o.isAlive()===!0&&(a.value=a.value.filter(d=>d!==M),a.value.length===0&&(U=!1),o.queuedFiles.value=o.queuedFiles.value.concat(v),v.forEach(d=>{o.updateFileStatus(d,"failed")}),t("factory-failed",b,v),q.value--)};M.then(b=>{U===!0?B(new Error("Aborted")):o.isAlive()===!0&&(a.value=a.value.filter(d=>d!==M),s(v,b))}).catch(B)}else s(v,M||{})}function s(v,M){const B=new FormData,b=new XMLHttpRequest,d=(y,ee)=>M[y]!==void 0?le(M[y])(ee):u.value[y](ee),h=d("url",v);if(!h){console.error("q-uploader: invalid or no URL specified"),q.value--;return}const V=d("formFields",v);V!==void 0&&V.forEach(y=>{B.append(y.name,y.value)});let I=0,p=0,x=0,E=0,S;b.upload.addEventListener("progress",y=>{if(S===!0)return;const ee=Math.min(E,y.loaded);o.uploadedSize.value+=ee-x,x=ee;let ae=x-p;for(let oe=I;ae>0&&oe<v.length;oe++){const H=v[oe];if(ae>H.size)ae-=H.size,I++,p+=H.size,o.updateFileStatus(H,"uploading",H.size);else{o.updateFileStatus(H,"uploading",ae);return}}},!1),b.onreadystatechange=()=>{b.readyState<4||(b.status&&b.status<400?(o.uploadedFiles.value=o.uploadedFiles.value.concat(v),v.forEach(y=>{o.updateFileStatus(y,"uploaded")}),t("uploaded",{files:v,xhr:b})):(S=!0,o.uploadedSize.value-=x,o.queuedFiles.value=o.queuedFiles.value.concat(v),v.forEach(y=>{o.updateFileStatus(y,"failed")}),t("failed",{files:v,xhr:b})),q.value--,m.value=m.value.filter(y=>y!==b))},b.open(d("method",v),h),d("withCredentials",v)===!0&&(b.withCredentials=!0);const F=d("headers",v);F!==void 0&&F.forEach(y=>{b.setRequestHeader(y.name,y.value)});const O=d("sendRaw",v);v.forEach(y=>{o.updateFileStatus(y,"uploading",0),O!==!0&&B.append(d("fieldName",y),y,y.name),y.xhr=b,y.__abort=()=>{b.abort()},E+=y.size}),t("uploading",{files:v,xhr:b}),m.value.push(b),O===!0?b.send(new Blob(v)):b.send(B)}return{isUploading:_,isBusy:T,abort:z,upload:A}}var st={name:"QUploader",props:ot,emits:nt,injectPlugin:ut},it=rt(st);const dt=za({name:"settingsPage",methods:{myTweak(e){return{height:e?`calc(100vh - ${e}px)`:"100vh"}},setMitemW(e){this.$q.localStorage.set("MitemW",e)},setserverAddr:function(e){this.$q.localStorage.set("baseUrl",e.endsWith("/")?e.slice(0,-1):e),this.resetBase()},setserverAuth(e="",t=""){e==""||t==""?(this.$q.localStorage.remove("auth"),this.busr="",this.bpsw=""):this.$q.localStorage.set("auth",{username:e,password:t})},btoa(e){return btoa(e)},setReaderOptions(){this.$q.localStorage.set("vue_RM",this.SReadModel),this.$q.localStorage.set("vue_WT",this.SreadMargins),this.$q.localStorage.set("vue_Scale",this.SreadScale)}},watch:{darkmode:function(e){this.$q.dark.set(e),this.$q.localStorage.set("dark",e)},useCache:function(e){this.$q.localStorage.set("useCache",e)}},setup(e,{emit:t}){t("setTitle","Settings");const o=Pa(),m=k(o.dark.isActive),a=k(o.localStorage.getItem("MitemW")),q=k(o.localStorage.getItem("useCache")),u=k(o.localStorage.getItem("baseUrl")),_=o.localStorage.getItem("auth"),T=k(o.localStorage.getItem("vue_RM")||"RTL"),U=k(o.localStorage.getItem("vue_WT")||!1),z=k(o.localStorage.getItem("vue_Scale")||!1);return{darkmode:m,Mitem:k(!1),MitemW:a,useCache:q,Saddr:k(!1),SRead:k(!1),SReadModel:T,SReadoptions:["RTL","LTR","SinglePage","Vertical"],SreadMargins:U,SreadScale:z,serverAddr:u,baut:k(!1),busr:k(_!=null?_.username:""),bpsw:k(_!=null?_.password:""),resetBase:Ia,isPwd:k(!1)}}}),ct=$e("div",{class:"text-h6"},"Manga Item width:",-1),vt=$e("div",{class:"text-h6"},"Enter Server Address",-1),mt=$e("div",{class:"text-h6"},"Enter Username and Password",-1),ft=$e("div",{class:"text-h6"},"Default Reader Settings",-1);function pt(e,t,o,m,a,q){return G(),J(Aa,{separator:"",dark:!!e.$q.dark.isActive,"style-fn":e.myTweak},{default:c(()=>[r(Y,{to:"/settings/categories"},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"category"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Categories")]),_:1})]),_:1})]),_:1}),L((G(),J(Y,{clickable:"",onClick:t[1]||(t[1]=u=>e.darkmode=!e.darkmode),class:"row justify-between"},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"brightness_6"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Dark mode")]),_:1})]),_:1}),r(Se,{color:"blue",modelValue:e.darkmode,"onUpdate:modelValue":t[0]||(t[0]=u=>e.darkmode=u),val:"battery"},null,8,["modelValue"])]),_:1})),[[Z]]),L((G(),J(Y,{clickable:"",onClick:t[3]||(t[3]=u=>e.useCache=!e.useCache),class:"row justify-between"},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"cached"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Use imanga cache")]),_:1})]),_:1}),r(Se,{color:"blue",modelValue:e.useCache,"onUpdate:modelValue":t[2]||(t[2]=u=>e.useCache=u),val:"battery"},null,8,["modelValue"])]),_:1})),[[Z]]),L((G(),J(Y,{clickable:"",onClick:t[9]||(t[9]=u=>e.Mitem=!0)},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"view_module"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Manga Item width")]),_:1}),r(K,{caption:""},{default:c(()=>[j(je(e.MitemW)+"px",1)]),_:1})]),_:1}),r(qe,{modelValue:e.Mitem,"onUpdate:modelValue":t[8]||(t[8]=u=>e.Mitem=u)},{default:c(()=>[r(_e,{class:"q-pa-lg"},{default:c(()=>[r(ce,{class:"q-px-none q-pt-none"},{default:c(()=>[ct]),_:1}),r(ce,{class:"q-pt-none q-px-none"},{default:c(()=>[j(" the target width for manga items in grids like the library and scource views ")]),_:1}),r(ye,{standout:"",type:"number",modelValue:e.MitemW,"onUpdate:modelValue":t[4]||(t[4]=u=>e.MitemW=u),suffix:"px"},null,8,["modelValue"]),r(Wa,{step:50,snap:"",modelValue:e.MitemW,"onUpdate:modelValue":t[5]||(t[5]=u=>e.MitemW=u),min:100,max:1e3},null,8,["modelValue"]),r(Ce,{align:"right",class:"q-pb-none"},{default:c(()=>[r(X,{flat:"",label:"Default",color:"primary",onClick:t[6]||(t[6]=u=>e.MitemW=300)}),L(r(X,{flat:"",label:"Cancel",color:"primary"},null,512),[[se]]),L(r(X,{flat:"",label:"Save",color:"primary",onClick:t[7]||(t[7]=u=>e.setMitemW(e.MitemW))},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Z]]),L((G(),J(Y,{clickable:"",onClick:t[14]||(t[14]=u=>e.Saddr=!0)},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"dns"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Server Address")]),_:1}),r(K,{caption:""},{default:c(()=>[j(je(e.$q.localStorage.getItem("baseUrl")),1)]),_:1})]),_:1}),r(qe,{modelValue:e.Saddr,"onUpdate:modelValue":t[13]||(t[13]=u=>e.Saddr=u)},{default:c(()=>[r(_e,{class:"q-px-md"},{default:c(()=>[r(ce,null,{default:c(()=>[vt]),_:1}),r(ye,{standout:"",type:"text",modelValue:e.serverAddr,"onUpdate:modelValue":t[10]||(t[10]=u=>e.serverAddr=u)},null,8,["modelValue"]),r(Ce,{align:"right"},{default:c(()=>[r(X,{flat:"",label:"Default",color:"primary",onClick:t[11]||(t[11]=u=>e.serverAddr="http://localhost")}),L(r(X,{flat:"",label:"Cancel",color:"primary"},null,512),[[se]]),L(r(X,{flat:"",label:"Save",color:"primary",onClick:t[12]||(t[12]=u=>e.setserverAddr(e.serverAddr))},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Z]]),L((G(),J(Y,{clickable:"",onClick:t[21]||(t[21]=u=>e.baut=!0)},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:e.bpsw&&e.busr?"o_lock_open":"lock"},null,8,["name"])]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Basic Auth")]),_:1})]),_:1}),r(qe,{modelValue:e.baut,"onUpdate:modelValue":t[20]||(t[20]=u=>e.baut=u)},{default:c(()=>[r(_e,{class:"q-px-md"},{default:c(()=>[r(ce,null,{default:c(()=>[mt]),_:1}),r(ye,{standout:"",label:"Username",type:"text",modelValue:e.busr,"onUpdate:modelValue":t[15]||(t[15]=u=>e.busr=u),name:"username",class:"q-my-sm"},null,8,["modelValue"]),r(ye,{standout:"",label:"Password",type:e.isPwd?"text":"password",modelValue:e.bpsw,"onUpdate:modelValue":t[17]||(t[17]=u=>e.bpsw=u),class:"q-my-sm",name:"password"},{append:c(()=>[r(re,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[16]||(t[16]=u=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["type","modelValue"]),r(Ce,{align:"right"},{default:c(()=>[L(r(X,{flat:"",label:"Clear Auth",color:"primary",onClick:t[18]||(t[18]=u=>e.setserverAuth())},null,512),[[se]]),L(r(X,{flat:"",label:"Cancel",color:"primary"},null,512),[[se]]),L(r(X,{flat:"",label:"Save",color:"primary",onClick:t[19]||(t[19]=u=>e.setserverAuth(e.busr,e.bpsw))},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Z]]),L((G(),J(Y,{clickable:"",onClick:t[28]||(t[28]=u=>e.SRead=!0)},{default:c(()=>[r(D,{avatar:""},{default:c(()=>[r(re,{name:"menu_book"})]),_:1}),r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Default Reader Settings")]),_:1})]),_:1}),r(qe,{modelValue:e.SRead,"onUpdate:modelValue":t[27]||(t[27]=u=>e.SRead=u)},{default:c(()=>[r(_e,{class:"q-px-sm"},{default:c(()=>[r(ce,null,{default:c(()=>[ft]),_:1}),r(ce,null,{default:c(()=>[L((G(),J(Y,{class:"row justify-between no-wrap items-center rounded-borders",clickable:"",onClick:t[23]||(t[23]=u=>e.SreadMargins=!e.SreadMargins)},{default:c(()=>[r(K,null,{default:c(()=>[j("Page Margins")]),_:1}),r(Se,{color:"blue",modelValue:e.SreadMargins,"onUpdate:modelValue":t[22]||(t[22]=u=>e.SreadMargins=u)},null,8,["modelValue"])]),_:1})),[[Z]]),r(We),L((G(),J(Y,{class:"row justify-between no-wrap items-center rounded-borders",clickable:"",onClick:t[25]||(t[25]=u=>e.SreadScale=!e.SreadScale)},{default:c(()=>[r(K,null,{default:c(()=>[j("Page Scale")]),_:1}),r(Se,{color:"blue",modelValue:e.SreadScale,"onUpdate:modelValue":t[24]||(t[24]=u=>e.SreadScale=u)},null,8,["modelValue"])]),_:1})),[[Z]]),r(We),r(La,{standout:"",label:"Reader Mode",modelValue:e.SReadModel,"onUpdate:modelValue":t[26]||(t[26]=u=>e.SReadModel=u),options:e.SReadoptions},null,8,["modelValue","options"])]),_:1}),r(Ce,{align:"right"},{default:c(()=>[L(r(X,{flat:"",label:"Save",color:"primary",onClick:e.setReaderOptions},null,8,["onClick"]),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Z]]),r(Ta,{"expand-separator":"",icon:"backup",label:"Backup","default-closed":""},{default:c(()=>[L((G(),J(Y,{clickable:"",class:"q-pl-xl",href:e.serverAddr+"/api/v1/backup/export/file"},{default:c(()=>[r(D,null,{default:c(()=>[r(K,null,{default:c(()=>[j("Create Backup")]),_:1}),r(K,{caption:""},{default:c(()=>[j("Backup library as a Tachiyomi backup")]),_:1})]),_:1})]),_:1},8,["href"])),[[Z]]),L((G(),J(Y,{clickable:"",class:"q-pl-xl"},{default:c(()=>[r(D,null,{default:c(()=>[r(it,{url:e.serverAddr+"/api/v1/backup/import/file",class:"q-ma-none",label:"Upload Backup",accept:".proto.gz","field-name":"backup.proto.gz",headers:[{name:"Authorization",value:"Basic"+e.btoa(e.busr+":"+e.bpsw)}],"auto-upload":"",style:{width:"100%"}},null,8,["url","headers"])]),_:1})]),_:1})),[[Z]])]),_:1})]),_:1},8,["dark","style-fn"])}var el=Ma(dt,[["render",pt]]);export{el as default};
